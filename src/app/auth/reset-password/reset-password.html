<div>
<div class="min-h-screen flex items-center justify-center px-4" style="background: var(--color-base-100)">
  <div class="card w-full max-w-md shadow-2xl" style="background: var(--color-base-200)">
    <div class="card-body">
      <h2 class="card-title justify-center text-2xl font-bold mb-2">
        {{ t('resetPasswordTitle') }}
      </h2>
      <p class="text-center text-sm opacity-70 mb-6">
        {{ t('resetPasswordSubtitle') }}
      </p>

      <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
        <!-- Email -->
        <div class="form-control mb-4">
          <label class="label">
            <span class="label-text font-semibold">{{ t('emailLabel') }}</span>
          </label>
          <input
            type="email"
            formControlName="email"
            class="input input-bordered w-full"
            [class.input-error]="getError('email')"
            [placeholder]="t('emailPlaceholder')"
          />
          @if (getError('email')) {
            <label class="label">
              <span class="label-text-alt text-error">{{ getError('email') }}</span>
            </label>
          }
        </div>

        <!-- OTP -->
        <div class="form-control mb-4">
          <label class="label">
            <span class="label-text font-semibold">{{ t('verificationCodeLabel') }}</span>
          </label>
          <input
            type="text"
            formControlName="otp"
            class="input input-bordered w-full text-center text-xl font-mono tracking-widest"
            [class.input-error]="getError('otp')"
            [placeholder]="t('verificationCodePlaceholder')"
            maxlength="6"
          />
          @if (getError('otp')) {
            <label class="label">
              <span class="label-text-alt text-error">{{ getError('otp') }}</span>
            </label>
          }
        </div>

        <!-- New Password -->
        <div class="form-control mb-4">
          <label class="label">
            <span class="label-text font-semibold">{{ t('newPasswordLabel') }}</span>
          </label>
          <input
            type="password"
            formControlName="newPassword"
            class="input input-bordered w-full"
            [class.input-error]="getError('newPassword')"
            [placeholder]="t('newPasswordPlaceholder')"
          />
          @if (getError('newPassword')) {
            <label class="label">
              <span class="label-text-alt text-error">{{ getError('newPassword') }}</span>
            </label>
          }
        </div>

        <!-- Confirm New Password -->
        <div class="form-control mb-4">
          <label class="label">
            <span class="label-text font-semibold">{{ t('confirmNewPasswordLabel') }}</span>
          </label>
          <input
            type="password"
            formControlName="confirmNewPassword"
            class="input input-bordered w-full"
            [class.input-error]="getError('confirmNewPassword') || isPasswordMismatch"
            [placeholder]="t('confirmNewPasswordPlaceholder')"
          />
          @if (getError('confirmNewPassword') || isPasswordMismatch) {
            <label class="label">
              <span class="label-text-alt text-error">{{ getError('confirmNewPassword') || 'Passwords do not match' }}</span>
            </label>
          }
        </div>

        <!-- Submit Button -->
        <div class="form-control mt-6">
          <button
            type="submit"
            class="btn btn-primary w-full"
            [disabled]="isLoading()"
          >
            @if (isLoading()) {
              <span class="loading loading-spinner loading-sm"></span>
              {{ t('resetting') }}
            } @else {
              {{ t('resetPasswordButton') }}
            }
          </button>
        </div>

        <!-- Back to Login -->
        <div class="text-center mt-4">
          <a routerLink="/auth/login" class="link link-hover text-sm" style="color: var(--color-primary)">
            {{ t('backToLogin') }}
          </a>
        </div>
      </form>
    </div>
  </div>
</div>

  <app-toast 
    [toasts]="toasts" 
    (close)="onToastClose($event)">
  </app-toast>
</div>