<div>
<div class="min-h-screen flex items-center justify-center px-4" style="background: var(--color-base-100)">
  <div class="card w-full max-w-md shadow-2xl" style="background: var(--color-base-200)">
    <div class="card-body">
      <h2 class="card-title justify-center text-2xl font-bold mb-2">
        {{ t('verifyAccountTitle') }}
      </h2>
      <p class="text-center text-sm opacity-70 mb-6">
        {{ t('verifyAccountSubtitle') }}
      </p>

      <!-- Email Display -->
      @if (email()) {
        <div class="alert" style="background: var(--color-base-300)">
          <span class="text-sm">
            {{ t('verificationCodeSentTo') }}
            <strong>{{ email() }}</strong>
          </span>
        </div>
      } @else {
        <div class="form-control mb-4">
          <label class="label">
            <span class="label-text font-semibold">{{ t('emailLabel') }}</span>
          </label>
          <input
            type="email"
            formControlName="email"
            class="input input-bordered w-full"
            [class.input-error]="getError('email')"
            [placeholder]="t('emailPlaceholder')"
          />
          @if (getError('email')) {
            <label class="label">
              <span class="label-text-alt text-error">{{ getError('email') }}</span>
            </label>
          }
        </div>
      }

      <form [formGroup]="verifyForm" (ngSubmit)="onSubmit()">
        <!-- OTP Input -->
        <div class="form-control mb-4">
          <label class="label">
            <span class="label-text font-semibold">{{ t('verificationCodeLabel') }}</span>
          </label>
          <input
            type="text"
            formControlName="otp"
            class="input input-bordered w-full text-center text-2xl font-mono tracking-widest"
            [class.input-error]="getError('otp')"
            [placeholder]="t('verificationCodePlaceholder')"
            maxlength="6"
          />
          @if (getError('otp')) {
            <label class="label">
              <span class="label-text-alt text-error">{{ getError('otp') }}</span>
            </label>
          }
        </div>

        <!-- Submit Button -->
        <div class="form-control mt-6">
          <button
            type="submit"
            class="btn btn-primary w-full"
            [disabled]="isLoading()"
          >
            @if (isLoading()) {
              <span class="loading loading-spinner loading-sm"></span>
              {{ t('verifying') }}
            } @else {
              {{ t('verifyAccountButton') }}
            }
          </button>
        </div>

        <!-- Resend OTP -->
        <div class="text-center mt-4">
          <p class="text-sm opacity-70 mb-2">{{ t('didntReceiveCode') }}</p>
          <button
            type="button"
            class="btn btn-link"
            [disabled]="isResending()"
            (click)="resendVerification()"
          >
            @if (isResending()) {
              <span class="loading loading-spinner loading-xs"></span>
            } @else {
              {{ t('resendCodeButton') }}
            }
          </button>
        </div>

        <!-- Back to Login -->
        <div class="text-center mt-4">
          <a routerLink="/auth/login" class="link link-hover text-sm" style="color: var(--color-primary)">
            {{ t('backToLogin') }}
          </a>
        </div>
      </form>
    </div>
  </div>
</div>

<app-toast 
  [toasts]="toasts" 
  (close)="onToastClose($event)">
</app-toast>
</div>